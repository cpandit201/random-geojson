 <!DOCTYPE html>
 <html>
	<head>
		<title>XYZ Maps Example: Visualize Space layer</title>

        a vector world map</title>


        <script src="./node_modules/@here/xyz-maps-common/dist/xyz-maps-common.min.js" type="text/javascript" charset="UTF-8" ></script>
        <script src="./node_modules/@here/xyz-maps-core/dist/xyz-maps-core.min.js" type="text/javascript" charset="UTF-8" ></script>
        <script src="./node_modules/@here/xyz-maps-display/dist/xyz-maps-display.min.js" type="text/javascript" charset="UTF-8" ></script>
        <script src="./node_modules/@here/xyz-maps-plugins/dist/xyz-maps-plugins.min.js" type="text/javascript" charset="UTF-8"></script>
        

 		<style type="text/css">
			#map {
				position: absolute;
            	overflow: hidden;
				top: 0;
				left: 0;
				width: 100%;
                height: 100%;
			}
 		</style>
	</head>
	<body>
		<div id="map"></div>

		<script type="application/javascript">
			//specify your credentials for image and link layers
	      	var YOUR_ACCESS_TOKEN = "AG8S8xM0jnvBY0xeZ3v8EUM";//XYZTestAutomation@here.com//"IzOHLHLyynLPwG28V26Hcw";//window.parent.YOUR_ACCESS_TOKEN;

			// configure layers
			var layers = [
                
        
            new here.xyz.maps.layers.MVTLayer({
                name   : 'mvt-world-layer',
                remote : {
                    url : 'https://xyz.api.here.com/tiles/osmbase/256/all/{z}/{x}/{y}.mvt?access_token='+YOUR_ACCESS_TOKEN
                    // optional settings:
                    // max  : 16,     // max level for loading data
                    // min  : 1       // min level for loading data
                    // tileSize : 512 // 512|256 defines mvt tilesize in case it can't be automatically detected in url..
                },
                min : 1,
                max : 20,

                style : {

                    backgroundColor: '#555555',

                    strokeWidthZoomScale: function (level) {
                        return level > 17 ? 1 : level > 14 ? .5 : .25
                    },

                    styleGroups: {

                        'earth'        : [{ zIndex: 1, type: 'Polygon', fill: '#555555' }],
                        'water'        : [{ zIndex: 2, type: 'Polygon', fill: '#353535' }],
                        'landuse'      : [{ zIndex: 3, type: 'Polygon', fill: '#666666' }],
                        'roads'        : [{ zIndex: 4, type: 'Line',  stroke: '#ffffff', strokeWidth: 4 }],
                        'roadshighway' : [{ zIndex: 5, type: 'Line',  stroke: '#ffffff', strokeWidth: 6 }],
                        'buildings'    : [{ zIndex: 7, type: 'Polygon', fill: '#999999' }]
                    },

                    assign: function (feature, level)
                    {
                        var props = feature.properties;
                        var kind  = props.kind;
                        var layer = props.layer; // the data layer of the feature
                        var geom  = feature.geometry.type;

                        if (layer == 'water') {
                            if (geom == 'LineString' || geom == 'MultiLineString') {
                                return;
                            }
                        }
                        if (layer == 'roads') {
                            if (kind == 'rail' || kind == 'ferry') {
                                return;
                            }
                            if (kind == 'highway') {
                                return layer + kind;
                            }
                        }
                        return layer;
                    }
                }
            }),
            // new here.xyz.maps.layers.TileLayer({
            //     // Name of the layer
            //     name: 'mySpaceLayer',

            //     // Minimum zoom level
            //     min: 14,

            //     // Maximum zoom level
            //     max: 20,

            //     // Define provider for this layer
            //     provider: new here.xyz.maps.providers.SpaceProvider ({
            //         // Name of the provider
            //         name:  'SpaceProvider',

            //         // Zoom level at which tiles are cached
            //         level: 14,

            //         // Space ID
            //         space: "Vd11QIwA",///'playground-link',

            //         // User credential of the provider
            //         credentials: {
            //             access_token:   YOUR_ACCESS_TOKEN//"AE-PgI_6T1yRkWuGzDfg2AQ"//spaceToken
            //         }
            //     })
            // })
        
            ]
			// setup the Map Display
			window.display = new  here.xyz.maps.Map( document.getElementById("map"), {
			    zoomLevel : 12,
			    center: {          
			        longitude: -73.8562, latitude: 40.85799
			    },
			    // add layers to display
			    layers: layers
			});


/*###visiblesource*/
// Create data layer with Space provider
var myLayer = new here.xyz.maps.layers.TileLayer({
	// Name of the layer
	name: 'mySpaceLayer',

	// Minimum zoom level
    min: 1,

    // Maximum zoom level
    max: 20,

    // Define provider for this layer
    provider: new here.xyz.maps.providers.SpaceProvider ({
    	// Name of the provider
		name:  'SpaceProvider',

		// Zoom level at which tiles are cached
		level: 14,

		// Space ID
		space:  "Z6JfAWnU",//"Vd11QIwA",//0.1 Million Points -//NYC Transit 'Z6JfAWnU',//'Vd11QIwA',//'playground-link',

		// User credential of the provider
		credentials: {
            access_token: YOUR_ACCESS_TOKEN
		}
	})
})

// Add the layer to display
display.addLayer(myLayer)
/*visiblesource###*/
		</script>
	</body>
</html>
